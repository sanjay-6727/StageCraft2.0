{% extends "layout.html" %}
{% block content %}
<div class="container-fluid px-4 py-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h3 class="fw-bold mb-1 text-dark">Projects</h3>
            <div class="text-muted small">Manage workspaces and SDLC practices</div>
        </div>
        <button class="btn btn-primary rounded-pill d-flex align-items-center gap-2 shadow" data-bs-toggle="modal"
            data-bs-target="#createProjectModal">
            <span class="material-symbols-outlined">add</span> New Project
        </button>
    </div>

    <!-- Projects Grid -->
    <div class="row g-4">
        {% for project in projects %}
        <div class="col-12 col-md-6 col-lg-4">
            <div class="glass p-4 rounded-4 shadow-sm h-100 position-relative d-flex flex-column hover-lift">
                <style>
                    .hover-lift {
                        transition: transform 0.2s ease, box-shadow 0.2s ease;
                    }

                    .hover-lift:hover {
                        transform: translateY(-3px);
                        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
                    }
                </style>
                <div class="d-flex justify-content-between align-items-start mb-3">
                    <h5 class="fw-bold mb-0 text-dark">{{ project.name }}</h5>
                    <span
                        class="badge bg-primary-subtle text-primary border border-primary-subtle rounded-pill px-3 py-1 fw-bold">{{
                        project.sdlc_practice }}</span>
                </div>
                <p class="text-muted small mb-4 flex-grow-1">{{ project.description or 'No description provided.' }}</p>
                <div
                    class="d-flex justify-content-between align-items-center mt-auto border-top border-secondary border-opacity-10 pt-3">
                    <small class="text-muted d-flex align-items-center"><span
                            class="material-symbols-outlined fs-6 me-1 opacity-75">calendar_today</span> {{
                        project.created_at.strftime('%Y-%m-%d') if project.created_at else 'N/A' }}</small>
                    <a href="/ui/board?project_id={{ project.id }}"
                        class="btn btn-sm btn-outline-dark rounded-pill fw-medium px-3">Open Board</a>
                </div>
            </div>
        </div>
        {% else %}
        <div class="col-12">
            <div class="glass p-5 text-center text-muted rounded-4 shadow-sm">
                <span class="material-symbols-outlined display-1 opacity-25 mb-3 text-primary">folder_open</span>
                <h4 class="fw-bold mb-2 text-dark">No Projects Yet</h4>
                <p>Create your first project to start managing workflows.</p>
                <button class="btn btn-primary rounded-pill px-4 mt-2 shadow" data-bs-toggle="modal"
                    data-bs-target="#createProjectModal">Create Project</button>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<!-- Create Project Modal -->
<div class="modal fade" id="createProjectModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content glass shadow-lg border-0 rounded-4">
            <div class="modal-header border-0 pb-0 pt-4 px-4">
                <h5 class="modal-title fw-bold text-dark">Create New Project</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body p-4">
                <form method="POST" action="/ui/projects">
                    <div class="mb-3">
                        <label class="form-label fw-medium text-dark">Project Name <span
                                class="text-danger">*</span></label>
                        <input type="text" name="name" class="form-control rounded-3 border-secondary-subtle" required
                            placeholder="e.g. Genesis">
                    </div>
                    <div class="mb-3">
                        <label class="form-label fw-medium text-dark">SDLC Practice</label>
                        <select name="sdlc_practice" class="form-select rounded-3 border-secondary-subtle">
                            <option value="Agile">Agile / Scrum</option>
                            <option value="Waterfall">Waterfall</option>
                            <option value="DevOps">DevOps CI/CD</option>
                            <option value="Kanban">Kanban</option>
                            <option value="Spiral">Spiral Model</option>
                        </select>
                        <div class="form-text small text-muted">Defines the methodology governing the process engine.
                        </div>
                    </div>
                    <div class="mb-4">
                        <label class="form-label fw-medium text-dark">Description</label>
                        <textarea name="description" class="form-control rounded-3 border-secondary-subtle" rows="3"
                            placeholder="Overview of the project..."></textarea>
                    </div>
                    <div class="d-flex justify-content-end gap-2 mt-4">
                        <button type="button" class="btn btn-light rounded-pill px-4"
                            data-bs-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-primary rounded-pill px-4 fw-bold shadow-sm">Create
                            Project</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}